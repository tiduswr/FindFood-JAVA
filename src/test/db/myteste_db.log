/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C2*/SET SCHEMA PUBLIC
drop table if exists Pessoa CASCADE 
drop table if exists Produto CASCADE 
drop table if exists Usuario CASCADE 
drop table if exists Venda CASCADE 
drop table if exists VendaProduto CASCADE 
create table Pessoa (pessoa_id bigint generated by default as identity (start with 1), cpf varchar(255), bairro varchar(255), cidade varchar(255), estado varchar(255), numero integer not null, rua varchar(255), nome varchar(255) not null, sobrenome varchar(255) not null, user_id bigint, primary key (pessoa_id))
create table Produto (produto_id bigint generated by default as identity (start with 1), descricao varchar(255) not null, estoque integer not null, imgPath varchar(255), nome varchar(255) not null, price double, tipo varchar(255) not null, user_id bigint, primary key (produto_id))
create table Usuario (user_id bigint generated by default as identity (start with 1), saldo double, senha varchar(255) not null, tipoValue integer not null, primary key (user_id))
create table Venda (venda_id bigint generated by default as identity (start with 1), date date not null, total double not null, user_id bigint, seller_id bigint, primary key (venda_id))
create table VendaProduto (venda_produto_id bigint generated by default as identity (start with 1), produto_id bigint, venda_id bigint, primary key (venda_produto_id))
alter table Pessoa add constraint FK6uif3ik8w6u3a0pfrogujhe8o foreign key (user_id) references Usuario
alter table Produto add constraint FK4ibetpgesk7y9gf61evfe038d foreign key (user_id) references Pessoa
alter table Venda add constraint FKheyjivx5g89mj16eqber1jx6y foreign key (user_id) references Pessoa
alter table Venda add constraint FKkllvjb5wfauay36cmrpeggga foreign key (seller_id) references Pessoa
alter table VendaProduto add constraint FKgo9s7tq9ew20lupqq7pprma1o foreign key (produto_id) references Produto
alter table VendaProduto add constraint FKgjo7lg3v8bt68fd59fe3q0mfm foreign key (venda_id) references Venda
INSERT INTO USUARIO VALUES(1,100.0E0,'f561aaf6ef0bf14d4208bb46a4ccb3ad',2)
INSERT INTO PESSOA VALUES(1,'12679692454','bairro','cidade','estado',12,'rua','Harllem','Alves',1)
COMMIT
INSERT INTO PESSOA VALUES(2,'69741558082','bairro','cidade','estado',12,'rua','Neto','Alves',NULL)
INSERT INTO USUARIO VALUES(2,100.0E0,'f561aaf6ef0bf14d4208bb46a4ccb3ad',2)
DELETE FROM PESSOA WHERE PESSOA_ID=1
INSERT INTO PESSOA VALUES(1,'12679692454','bairro','cidade','estado',12,'rua','Harllem','Alves',2)
COMMIT
INSERT INTO VENDA VALUES(1,'2022-07-16',75.0E0,1,2)
INSERT INTO PRODUTO VALUES(1,'Carne',10,'img','Burger',25.0E0,'Hamburger',1)
INSERT INTO VENDAPRODUTO VALUES(1,1,1)
INSERT INTO PRODUTO VALUES(2,'Carne',10,'img','XBurger',25.0E0,'Hamburger',1)
INSERT INTO VENDAPRODUTO VALUES(2,2,1)
INSERT INTO PRODUTO VALUES(3,'Carne',10,'img','ZBurger',25.0E0,'Hamburger',1)
INSERT INTO VENDAPRODUTO VALUES(3,3,1)
COMMIT
drop table if exists Pessoa CASCADE 
drop table if exists Produto CASCADE 
drop table if exists Usuario CASCADE 
drop table if exists Venda CASCADE 
drop table if exists VendaProduto CASCADE 
DISCONNECT
